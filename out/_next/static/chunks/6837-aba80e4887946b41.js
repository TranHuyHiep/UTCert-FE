"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6837],{46225:function(e,t,n){var r=n(85893),i=n(90948),c=n(53156),a=n(87357),o=n(15861),s=n(50122),l=(0,i.ZP)(c.Z)((function(e){var t=e.theme;return"\n        margin-top: ".concat(t.spacing(4),";\n")}));t.Z=function(){return(0,r.jsx)(l,{className:"footer-wrapper",children:(0,r.jsxs)(a.Z,{pb:4,display:{xs:"block",md:"flex"},alignItems:"center",textAlign:{xs:"center",md:"left"},justifyContent:"space-between",children:[(0,r.jsx)(a.Z,{children:(0,r.jsx)(o.Z,{variant:"subtitle1",children:"\xa9 2023 - UTCert"})}),(0,r.jsxs)(o.Z,{sx:{pt:{xs:2,md:0}},variant:"subtitle1",children:["Crafted by"," ",(0,r.jsx)(s.Z,{href:"https://github.com/TranHuyHiep",target:"_blank",rel:"noopener noreferrer",children:"UTCert"})]})]})})}},93366:function(e,t,n){n.a(e,(async function(e,r){try{var i=n(34051),c=n.n(i),a=n(85893),o=n(67294),s=n(11057),l=n(50657),u=n(6514),d=n(87357),f=n(15861),p=n(37645),h=n(58951),x=n(50135),g=n(31425),m=n(90948),y=n(70422),j=n(26307),v=n(41733),b=n(21200),C=n(22961),k=n(78394),Z=n(1653),T=n(1533),S=n(42793),I=e([b]);function N(e,t,n,r,i,c,a){try{var o=e[c](a),s=o.value}catch(l){return void n(l)}o.done?t(s):Promise.resolve(s).then(r,i)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var c=e.apply(t,n);function a(e){N(c,r,i,a,o,"next",e)}function o(e){N(c,r,i,a,o,"throw",e)}a(void 0)}))}}b=(I.then?(await I)():I)[0];var w=(0,m.ZP)(s.Z)((function(e){var t=e.theme;return"\n     background: ".concat(t.colors.error.main,";\n     color: ").concat(t.palette.error.contrastText,";\n\n     &:hover {\n        background: ").concat(t.colors.error.dark,";\n     }\n    ")})),E=(0,m.ZP)(s.Z)((function(e){var t=e.theme;return"\n     background: ".concat(t.colors.info.main,";\n     color: ").concat(t.palette.info.contrastText,";\n\n     &:hover {\n        background: ").concat(t.colors.info.dark,";\n     }\n    ")})),O=(0,m.ZP)(s.Z)((function(e){var t=e.theme;return"\n     background: ".concat(t.colors.secondary.light,";\n     color: ").concat(t.palette.secondary.contrastText,";\n\n     &:hover {\n        background: ").concat(t.colors.secondary.dark,";\n     }\n    ")}));function A(e){var t=e.open,n=e.onClose,r=e.certificates,i=(0,o.useState)(0),c=i[0],d=i[1];return r&&0!==r.length?(0,a.jsx)(l.Z,{open:t,onClose:n,maxWidth:"lg",children:(0,a.jsxs)(u.Z,{style:{display:"grid",gridTemplateColumns:"6fr 4fr",alignItems:"center"},children:[(0,a.jsx)("div",{children:(0,a.jsx)("img",{src:r[c].imageLink,alt:"\u1ea2nh",style:{maxWidth:"100%",maxHeight:"100%"}})}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"auto 2fr",marginLeft:"30px",fontSize:"15px",gap:"5px",backgroundColor:"Background"},children:[(0,a.jsx)("p",{style:{fontWeight:"bold"},children:"CODE:"}),(0,a.jsx)("p",{children:r[c].certificateCode}),(0,a.jsx)("p",{style:{fontWeight:"bold"},children:"ORGANIZATION :"}),(0,a.jsx)("p",{children:r[c].organizationName}),(0,a.jsx)("p",{style:{fontWeight:"bold",borderBottom:"1px solid #000",paddingBottom:"5px"},children:"DATE RECEIVED:"}),(0,a.jsx)("p",{style:{borderBottom:"1px solid #000"},children:r[c].receivedDoB}),(0,a.jsx)("p",{style:{fontWeight:"bold",marginTop:"0px"},children:"RECEIVED IDENTITY:"}),(0,a.jsx)("p",{style:{marginTop:"0px"},children:r[c].receivedIdentityNumber}),(0,a.jsx)("p",{style:{fontWeight:"bold"},children:"RECEIVED NAME:"}),(0,a.jsx)("p",{children:r[c].receivedName})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px"},children:[(0,a.jsx)(s.Z,{onClick:function(){d((c-1+r.length)%r.length)},children:"Prev"}),(0,a.jsx)(s.Z,{onClick:function(){d((c+1)%r.length)},children:"Next"})]})]})}):null}function P(e){var t=function(e){for(var t="",n=0;n<e.length;n++){t+=("00"+e.charCodeAt(n).toString(16)).slice(-2)}return t},n=(0,o.useState)(!1),r=n[0],i=n[1],m=(0,o.useState)(!1),I=m[0],N=m[1],P=(0,o.useState)([]),W=P[0],B=P[1],R=(0,o.useState)(),G=R[0],U=R[1],V=(0,o.useState)(""),Y=V[0],_=V[1];function L(){return L=D(c().mark((function t(n){var r,i,a,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],Object.keys(n).map((function(t){return i=e[t]})),t.next=5,b.DG.enable("eternl");case 5:a=t.sent,o=new Promise(function(){var e=D(c().mark((function e(t,n){var o,s,l,u,d,f,p,h,x,g;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getUsedAddresses();case 2:for(o=e.sent,s=o[0],l=b.WQ.withOneSignature(s),u=new b.YW({initiator:a}),d=[],f=0;f<i.length;f++)r.push(i[f].certificateID),p={certificateName:i[f].certificateName,classification:i[f].classification,image:i[f].ipfsLink,mediaType:"image/jpg",receivedName:i[f].receivedName,yearOfGraduation:""+i[f].yearOfGraduation,identity:i[f].receivedIdentityNumber},h={assetName:i[f].certificateType+i[f].certificateCode,assetQuantity:"1",metadata:p,label:"721",recipient:s},d.push(h),u.mintAsset(l,d[f]);return e.next=10,u.build();case 10:return x=e.sent,e.next=13,a.signTx(x);case 13:return g=e.sent,e.next=16,a.submitTx(g);case 16:t(),n();case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),o.then((function(){fetch(S.T+"/Certificate/issued/sign-multiple",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(){alert("Sign successful!")})).catch((function(e){console.log(e),alert("Sign error!")}))})).catch((function(){alert("Sign error!")}));case 8:case"end":return t.stop()}}),t)}))),L.apply(this,arguments)}function Q(){return Q=D(c().mark((function n(r){var i,a,o;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=[],Object.keys(r).map((function(t){return a=e[t]})),o=new Promise(function(){var e=D(c().mark((function e(n,r){var o,s,l,u,d,f,p,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.DG.enable("eternl");case 2:return o=e.sent,e.next=5,o.getUsedAddresses();case 5:return e.next=7,o.getPolicyIds();case 7:for(s=e.sent,l=new b.YW({initiator:o}),u=0;u<a.length;u++)i.push(a[u].certificateID),d=t(a[u].certificateType+a[u].certificateCode),console.log(a[u].receivedAddressWallet),console.log(s[0]+d),f={unit:s[0]+d,quantity:"1"},l.sendAssets(a[u].receivedAddressWallet,[f]);return e.next=12,l.build();case 12:return p=e.sent,e.next=15,o.signTx(p);case 15:return h=e.sent,e.next=18,o.submitTx(h);case 18:n(),r();case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),o.then((function(){fetch(S.T+"/Certificate/issued/send-multiple",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(){alert("Send successful!")})).catch((function(e){console.log(e),alert("Send error!")}))})).catch((function(){alert("Send error!")}));case 5:case"end":return n.stop()}}),n)}))),Q.apply(this,arguments)}(0,o.useEffect)((function(){var t=[];if(Object.keys(e).map((function(n){return t=e[n]})),B(t),t.length>0){console.log(t);for(var n=t[0].certificateStatus,r=1;r<t.length;r++)if(n!=t[r].certificateStatus){n=0;break}if(2==n)for(var i=0;i<t.length;i++)if(1==t[i].contactStatus){n=0;break}U(n)}}),[e]);var H=function(t){var n;Object.keys(t).map((function(t){return n=e[t]})),B(n),i(!0)},J=function(t){var n,r=(0,T.Z)("stakeId");console.log(t),Object.keys(t).map((function(t){return n=e[t]})),n.map((function(e){return r+=","+e.certificateCode})),r=function(e,t){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZ_,0123456789",r=e.toUpperCase(),i=t.toUpperCase(),c="",a=0;a<e.length;a++){var o=r[a],s=i[a%t.length];if(n.includes(o)){var l=n.indexOf(o),u=n.indexOf(s);c+=n[(l+u)%n.length]}else c+=o}return c}(r,"KEYWORD"),_("https://utcert.vercel.app/?q="+r),N(!0)},z=function(){N(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:(0,a.jsxs)(d.Z,{display:"flex",alignItems:"center",children:[(0,a.jsx)(f.Z,{variant:"h5",color:"text.secondary",children:"Bulk actions:"}),1==G?(0,a.jsx)(E,{sx:{ml:1},startIcon:(0,a.jsx)(y.Z,{}),variant:"contained",onClick:function(){return function(e){return L.apply(this,arguments)}(e)},children:"Sign"}):2==G?(0,a.jsx)(E,{sx:{ml:1},startIcon:(0,a.jsx)(j.Z,{}),variant:"contained",onClick:function(){return function(e){return Q.apply(this,arguments)}(e)},children:"Send"}):3==G?(0,a.jsx)(w,{sx:{ml:1},startIcon:(0,a.jsx)(v.Z,{}),variant:"contained",onClick:function(){return function(t){var n,r=[];Object.keys(t).map((function(t){return n=e[t]}));for(var i=0;i<n.length;i++)r.push(n[i].certificateID);fetch(S.T+"/Certificate/issued/delete-multiple",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(){alert("Delete Successful!")})).catch((function(){alert("Delete Error!")}))}(e)},children:"Delete"}):G||0==G?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(O,{sx:{ml:1},startIcon:(0,a.jsx)(k.Z,{}),variant:"contained",onClick:function(){J(e)},children:"Generate QR"}),(0,a.jsx)(E,{sx:{ml:1},startIcon:(0,a.jsx)(C.Z,{}),variant:"contained",onClick:function(){H(e)},children:"View"})]})}),(0,a.jsx)(A,{open:r,onClose:function(){i(!1)},certificates:W}),(0,a.jsxs)(l.Z,{open:I,onClose:z,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,a.jsx)(p.Z,{id:"alert-dialog-title",children:"Your certifiates code here"}),(0,a.jsx)(u.Z,{children:(0,a.jsxs)(h.Z,{id:"alert-dialog-description",style:{display:"flex",flexDirection:"column"},children:[(0,a.jsx)("div",{style:{marginBottom:"10px"},children:(0,a.jsx)(Z.Z,{size:300,bgColor:"white",fgColor:"black",value:Y})}),(0,a.jsx)(x.Z,{id:"outlined-read-only-input",label:"QR Code",defaultValue:Y,InputProps:{readOnly:!0}})]})}),(0,a.jsx)(g.Z,{children:(0,a.jsx)(s.Z,{onClick:z,children:"Confirm"})})]})]})}t.Z=P,r()}catch(N){r(N)}}))}}]);